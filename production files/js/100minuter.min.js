"use strict";var spiik=spiik||{};spiik.init=function(){spiik.settings(function(){spiik.counterView()})},spiik.settings=function(t){return new Vue({el:"#settingsHolderEl",methods:{save:function(){this.setHtmlFontColor(this.getSelectedColor());spiik.backgroundView(JSON.stringify(this.$els.videoSrc.value));this.$destroy(this),t()},skip:function(){this.$destroy(this),t()},getSelectedColor:function(){for(var t=this.$el.querySelectorAll("table input"),i=0;i<t.length;i++)if(t[i].checked){t=t[i];break}return t.value},setHtmlFontColor:function(t){document.body.style.color=t}}})},spiik.counterView=function(){return new Vue({el:"#counter",methods:{timeToString:function(t,i,e){return 10>e&&(e="0"+e),10>i&&(i="0"+i),10>t&&(t="0"+t),""+t+":"+i+":"+e}},attached:function(){var t=new spiik.Counter(1,40);t.start(function(i){t.isNewMinute()&&(this.$els.shotCounter.textContent=t.totalNrOfMinutes()),this.$els.timeCounter.textContent=this.timeToString(i.getHours(),i.getMinutes(),i.getSeconds())}.bind(this))}})},spiik.backgroundView=function(t){return new Vue({el:"#backgroundView",methods:{getYouTubeAutoPlayLink:function(t){var i=document.createElement("div");return i.innerHTML=JSON.parse(t),i.querySelector("iframe").src+="?autoplay=1",i}},attached:function(){var i=this.getYouTubeAutoPlayLink(t);this.$els.videoHolder.appendChild(i)}})},spiik.Counter=function(t,i,e,n,s){this.endTimeMinute=i,this.endTimeHour=t,this.minutes=n||0,this.seconds=s||0,this.hour=e||0,this.newMinute=!1,this.Interval=1e3,this.time=null},spiik.Counter.prototype.start=function(t){this.timerId=setInterval(function(){this.time=this.tick(),t(this.time)}.bind(this),this.Interval)},spiik.Counter.prototype.stop=function(){clearInterval(this.timerId)},spiik.Counter.prototype.tick=function(){return this.seconds++,60==this.seconds&&(this.newMinute=!0,this.seconds=0,this.minutes++,60==this.minutes&&(this.minutes=0,this.hour=1)),this.isTimeEnd()&&this.stop(),new Date("0000","0","0",this.hour,this.minutes,this.seconds)},spiik.Counter.prototype.isNewMinute=function(){var t=this.newMinute;return this.newMinute=!1,t},spiik.Counter.prototype.isTimeEnd=function(){return this.hour>=this.endTimeHour&&this.minutes>=this.endTimeMinute},spiik.Counter.prototype.totalNrOfMinutes=function(){for(var t=0,i=0;i<this.hour;i++)t+=60;for(var e=0;e<this.minutes;e++)t++;return t},window.onload=spiik.init;